#!/bin/sh
# Opens new tab in qutebrowser based on bookmark or search.

while getopts "bs" arg; do
	case $arg in
		b) SID=$("$HOME"/.local/bin/uitools/rbuku -s);;
		s) SEARCHER=$("$HOME"/.local/bin/uitools/qb-get-searcher);
			if [ -n "$SEARCHER" ] ; then
				SID=$(echo "$SEARCHER" | awk -F ': ' '{print $1}');
				SURL=$(echo "$SEARCHER" | awk -F ': ' '{print $2}');
				STRING=$(rofi -show -dmenu -p "$SID" -mesg "ðŸ”Ž $SURL");
				if [ -n "$STRING" ] ; then
					notify-send "ðŸ”Ž $SID searching" "$STRING";
				else
					notify-send "ðŸ”Ž $SID cancelled" && exit;
				fi;
			else
				notify-send "ðŸ”Ž cancelled" && exit;
			fi;;
		*) notify-send "qb-open: invalid flag" && exit;;
	esac;
done;


if [ -n "$SID" ] || [ -n "$STRING" ] ; then
	qutebrowser ":open -t $SID $STRING";
fi;
